<!DOCTYPE html>
<html>
	<head>
		<title>Ruz</title>
		<meta charset="utf-8">
		<meta http-equiv="cache-control" content="max-age=0" />
		<meta http-equiv="cache-control" content="no-cache" />
		<meta http-equiv="expires" content="0" />
		<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
		<meta http-equiv="pragma" content="no-cache" />
		<style>
			body { margin: 0; overflow: hidden;}
			canvas { width: 100%; height: 100% }
		</style>
	</head>

	<body>

		<div id="WebGL-output"></div>
		<div id="Stats-output"></div>
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r68/three.js" > </script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.5/dat.gui.js"> </script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/stats.js/r14/Stats.js"></script>
		<script type="text/javascript">

			function init(){

				function renderScene(){
					stats.update();

					step+=0.04;
					sphere.position.x = 20  + (10 * (Math.cos(step)));
					sphere.position.y = 2  + (10 * Math.abs(Math.sin(step)));
					//console.log ( "sphere(" + sphere.position.x + "," + sphere.position.y +  ")" )
					cube.rotation.x += 0.02;

					requestAnimationFrame(renderScene);
					renderer.render(scene, camera);

				}

				var step = 0;
				var stats = initStats();
				var gui = new dat.GUI();
				var width = window.innerWidth;
				var height = window.innerHeight;

				var scene = new THREE.Scene();
				var camera = new THREE.PerspectiveCamera(45, width/height, 0.1, 1000);

				var renderer = new THREE.WebGLRenderer();
				//renderer.setClearColorHex(0xff0000);
				renderer.setClearColor(new THREE.Color(0xff0000, 1.0));
				renderer.setSize(width,height);
				renderer.shadowMapEnabled = true;

				var axes = new THREE.AxisHelper(20);
				scene.add(axes);

				var planeGeometry = new THREE.PlaneGeometry(60,20);
				var planeMaterial = new THREE.MeshLambertMaterial({color: 0xcccccc});
				var plane = new THREE.Mesh(planeGeometry,planeMaterial);
				plane.receiveShadow= true;
				plane.rotation.x = -0.5 * Math.PI;
				plane.position.x = 15;
				plane.position.y = 0;
				plane.position.z = 0;
				scene.add(plane);

			 	var cubeGeometry = new THREE.BoxGeometry(4,4,4);
			 	var cubeMaterial = new THREE.MeshLambertMaterial({color: 0xe3e300});
			 	var cube = new THREE.Mesh(cubeGeometry,cubeMaterial);
				cube.castShadow = true;
			 	cube.position.x = 0;
			 	cube.position.y = 3;
			 	cube.position.z = -4;
			 	scene.add(cube);

			 	var sphereGeometry = new THREE.SphereGeometry(4,20,20);
			 	var sphereMaterial = new THREE.MeshLambertMaterial({color: 0xcc6633});
			 	var sphere = new THREE.Mesh(sphereGeometry, sphereMaterial);
			 	sphere.castShadow = true;
				sphere.rotation.x=0;//-0.5* Math.Pi;
			 	sphere.position.x=20;
			 	sphere.position.y=4;
			 	sphere.position.z=2;
			 	scene.add(sphere);

				// 	var cylinderGeometry = new THREE.CylinderGeometry(5,5,20); // Later on i want to position and animate the cylinder.
				// 	var cylinderMaterial = new THREE.MeshLambertMaterial({color: 0xCC6633});
				// 	var cylinder = new THREE.Mesh(cylinderGeometry, cylinderMaterial);
				// 	cylinder.castShadow= true;
				// cylinder.position.x=0;
				// 	cylinder.position.y=0;
				// 	cylinder.position.z=0;
				// 	scene.add(cylinder);

				camera.position.x=-30;
				camera.position.y=40;
				camera.position.z=30;
				camera.lookAt(scene.position);

				var spotLight = new THREE.SpotLight(0xffffff);
				spotLight.position.x = -40;
				spotLight.position.y = 60;
				spotLight.position.z = -10;
				spotLight.castShadow = true;
				scene.add(spotLight);

				document.getElementById("WebGL-output").appendChild(renderer.domElement);
				renderScene();
				console.log("end of init");
			};

			function initStats(){// Later I want to enable both modes.
				var stats = new Stats();
				stats.setMode(0);
				stats.domElement.style.position = 'absolute';
				stats.domElement.style.left = '0px';
				stats.domElement.style.top = '0px';
				document.getElementById("Stats-output").appendChild(stats.domElement);
				return stats;

			}


			window.onload = init;

		</script>

	</body>
</html>
